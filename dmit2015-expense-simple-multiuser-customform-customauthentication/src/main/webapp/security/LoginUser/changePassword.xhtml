<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:f5="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	xmlns:p="http://primefaces.org/ui"  
	xmlns:b="http://bootsfaces.net/ui"
	template="/WEB-INF/templates/bootsfaces-template.xhtml">
	
	<ui:param name="title" value="Change Password" />

	<ui:define name="maincontent">
		<div class="container">
			
			<b:jumbotron>
				<h1>Change Password</h1>
			</b:jumbotron>
		
			<b:messages id="messages" />
			
			<p>Use this form to change your password. Once changed, your new password will be in effect next time you login
			</p>
			
			<b:form name="passwordForm">
			
				<b:inputText id="username" 
					label="Username" 
					readonly="true"
					value="#{facesContext.externalContext.remoteUser}">
				</b:inputText>
			
	            <b:inputSecret id="existingPassword" 
	            	label="Current Password" 
	            	placeholder="Current Password" 
	            	type="password"
	            	value="#{loginUserCRUDController.currentPassword}">
	                <f:facet name="prepend">
	                    <b:iconAwesome name="key" />
	                </f:facet>
	                <b:focus />
	            </b:inputSecret>

	            <b:inputSecret id="newPassword" 
	            	label="New Password" 
	            	placeholder="New Password" 
	            	type="password"
	            	value="#{loginUserDetail.plainTextPassword}">
	                <f:facet name="prepend">
	                    <b:iconAwesome name="key" />
	                </f:facet>
	            </b:inputSecret>

	            <b:inputSecret id="confirmNewPassword" 
	            	label="Confirm New Password" 
	            	placeholder="Confirm New Password" 
	            	type="password"
	            	value="#{loginUserDetail.confirmedPlainTextPassword}">
	                <f:facet name="prepend">
	                    <b:iconAwesome name="key" />
	                </f:facet>
	            </b:inputSecret>

	            <b:commandButton value="Change Password" 
	            	actionListener="#{loginUserCRUDController.changePassword()}"  
	            	icon="hdd" />
	            	
	            <f:validateWholeBean value="#{loginUserDetail}"   />		
	            	
	        </b:form>
		</div>

	</ui:define>

</ui:composition>